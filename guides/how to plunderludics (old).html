<!DOCTYPE html>

<html lang="en">

        <head>
                <!-- Page information -->
                <meta charset="UTF-8" />
                <meta name="node_id" content="how to plunderludics (old)">
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <link rel="shortcut icon" href="/favicon.ico" />

                <!-- Set title -->
                <title>plunderludics wiki</title>

                <!-- Includes -->
                <script src="/obs.html/static/obsidian_core.js"></script>
<script src="/obs.html/static/encoding.js"></script>
<link rel="stylesheet" href="/obs.html/static/master.css" />
<script src="/obs.html/static/dirtree.js"></script>




                <!-- Onload tweaks -->
                <script>
                        const CURRENT_NODE = 'how to plunderludics (old)';
                        const HTML_URL_PREFIX = '';
                        const PAGE_DEPTH = 1;
                </script>
        </head>

<body class="theme-light">
        <div id="antiflash" style="display: none;"></div>
        <script>
                document.getElementById('antiflash').style.display = 'block';
        </script>
        

        <div id="page_holder" class="flex_col">
                <div id="header" class="header">
    <div id="header_flex" class="flex_row">
            <a href="/index.html" id="homelink" title="Clear screen and go to homepage">plunderludics wiki</a>
            <div id="menu_toggle_button" class="navbar-button requires_js" onclick="toggle_menu()">
                    â‰¡
            </div>
            <div id="navbar" class="navbar requires_js">
                    
                    <div class="icon-tray">
                            
                            
                            
                            
                            
                            
                    </div>
                    <div style="display: flex; flex-direction:column">
                        <div id="left_pane_toggle_nav" class="left_pane_toggle_nav">Toggle Directory Tree Pane</div>
                        <div id="right_pane_toggle_nav" class="right_pane_toggle_nav">Toggle Table of Contents Pane</div>
                    </div>
            </div>
    </div>
    
</div>
                <div class="flex_row">
                        <div id="left_pane" class="left_pane active">
    <div id="left_pane_fold_header" class="left_pane_fold_header fold_header">x</div>
    <div id="left_pane_content" class="left_pane_content">
            <div id="dirtree"><button id="folder-1" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>devlogs</button>
<div id="folder-container-1" class="dir-container requires_js " path="/devlogs">
	<button id="folder-2" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>2023-02-25 spring salad</button>
	<div id="folder-container-2" class="dir-container requires_js " path="/devlogs/2023-02-25 spring salad">
		<ul class="dir-list">
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/Feztris.JPG"  class="external-link">Feztris.JPG</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/auto-mario.JPG"  class="external-link">auto-mario.JPG</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/exercises in mario.JPG"  class="external-link">exercises in mario.JPG</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/pl1pl2pl3.JPG"  class="external-link">pl1pl2pl3.JPG</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/ring-shuffler-multibowl.JPG"  class="external-link">ring-shuffler-multibowl.JPG</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/spring-salad-poster.jpg"  class="external-link">spring-salad-poster.jpg</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/tapestry.jpg"  class="external-link">tapestry.jpg</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/tbaao.png"  class="external-link">tbaao.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/tbaaobaao.jpg"  class="external-link">tbaaobaao.jpg</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/three-skeletons 2.JPG"  class="external-link">three-skeletons 2.JPG</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/devlogs/2023-02-25 spring salad/untitled-plundering.jpg"  class="external-link">untitled-plundering.jpg</a></li>
		</ul>
	</div>
	<ul class="dir-list">
		<li><div class="file-icon"></div><a class="" href="/devlogs/2022-10-07.html"  >2022-10-07</a></li>
		<li><div class="file-icon"></div><a class="" href="/devlogs/2022-10-21.html"  >2022-10-21</a></li>
		<li><div class="file-icon"></div><a class="" href="/devlogs/2022-10-28.html"  >2022-10-28</a></li>
		<li><div class="file-icon"></div><a class="" href="/devlogs/2022-12-03 babycastles.html"  >2022-12-03 babycastles</a></li>
		<li><div class="file-icon"></div><a class="" href="/devlogs/2023-02-25 spring salad.html"  >2023-02-25 spring salad</a></li>
		<li><div class="file-icon"></div><a class="" href="/devlogs/2024-02-24 Looped Play (internal).html"  >2024-02-24 Looped Play (internal)</a></li>
		<li><div class="file-icon"></div><a class="" href="/devlogs/2024-03-27 Looped Play (art basel).html"  >2024-03-27 Looped Play (art basel)</a></li>
	</ul>
</div>
<button id="folder-3" class="dir-button active" onclick="toggle_dir(this.id)"><div class="file-icon"></div>guides</button>
<div id="folder-container-3" class="dir-container requires_js active" path="/guides">
	<button id="folder-4" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>using preexisting save files</button>
	<div id="folder-container-4" class="dir-container requires_js " path="/guides/using preexisting save files">
		<ul class="dir-list">
			<li><div class="file-icon non-md-file"></div><a class="" href="/guides/using preexisting save files/Pasted image 20240619013114.png"  class="external-link">Pasted image 20240619013114.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/guides/using preexisting save files/Pasted image 20240619013646.png"  class="external-link">Pasted image 20240619013646.png</a></li>
		</ul>
	</div>
	<ul class="dir-list">
		<li><div class="file-icon"></div><a class="active current_page_dirtree" href="/guides/how to plunderludics (old).html"  >how to plunderludics (old)</a></li>
		<li><div class="file-icon"></div><a class="" href="/guides/plundering 101 (old).html"  >plundering 101 (old)</a></li>
		<li><div class="file-icon"></div><a class="" href="/guides/using preexisting save files.html"  >using preexisting save files</a></li>
	</ul>
</div>
<button id="folder-5" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>samples</button>
<div id="folder-container-5" class="dir-container requires_js " path="/samples">
	<button id="folder-6" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>Spyro The Dragon (PS1)</button>
	<div id="folder-container-6" class="dir-container requires_js " path="/samples/Spyro The Dragon (PS1)">
		<ul class="dir-list">
			<li><div class="file-icon"></div><a class="" href="/samples/Spyro The Dragon (PS1)/unremarkable-hill-invisiblewall.html"  >unremarkable-hill-invisiblewall</a></li>
		</ul>
	</div>
	<ul class="dir-list">
	</ul>
</div>
<button id="folder-7" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>tools</button>
<div id="folder-container-7" class="dir-container requires_js " path="/tools">
	<ul class="dir-list">
		<li><div class="file-icon"></div><a class="" href="/tools/bizhawk.html"  >bizhawk</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/jsnes.html"  >jsnes</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/libsm64-unity.html"  >libsm64-unity</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/mame.html"  >mame</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/obs.html"  >obs</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/osc.html"  >osc</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/plunderunity.html"  >plunderunity</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/touch designer.html"  >touch designer</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/unityhawk.html"  >unityhawk</a></li>
		<li><div class="file-icon"></div><a class="" href="/tools/vcv rack.html"  >vcv rack</a></li>
	</ul>
</div>
<button id="folder-8" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>works</button>
<div id="folder-container-8" class="dir-container requires_js " path="/works">
	<button id="folder-9" class="dir-button " onclick="toggle_dir(this.id)"><div class="file-icon"></div>media</button>
	<div id="folder-container-9" class="dir-container requires_js " path="/works/media">
		<ul class="dir-list">
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-07-mario-angst-1.mp4"  class="external-link">2022-10-07-mario-angst-1.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-07-mario-angst-2.mp4"  class="external-link">2022-10-07-mario-angst-2.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-07-mario-feedback-1.mp4"  class="external-link">2022-10-07-mario-feedback-1.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-07-mario-feedback-2.mp4"  class="external-link">2022-10-07-mario-feedback-2.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-07-mario-feedback-3.mp4"  class="external-link">2022-10-07-mario-feedback-3.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-07-mario-feedback-4.mp4"  class="external-link">2022-10-07-mario-feedback-4.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-07-mario-feedback-5.mp4"  class="external-link">2022-10-07-mario-feedback-5.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-21-checkers.jpg"  class="external-link">2022-10-21-checkers.jpg</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-21-killer-instinct-matte.mp4"  class="external-link">2022-10-21-killer-instinct-matte.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-21-mario-double.mp4"  class="external-link">2022-10-21-mario-double.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-21-mario-double2.mp4"  class="external-link">2022-10-21-mario-double2.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-21-mario-flicker-distinct.mp4"  class="external-link">2022-10-21-mario-flicker-distinct.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-21-mario-lylat-system2.mp4"  class="external-link">2022-10-21-mario-lylat-system2.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-28-chainchomp-matte.mp4"  class="external-link">2022-10-28-chainchomp-matte.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-10-28-linked-jumps.mp4"  class="external-link">2022-10-28-linked-jumps.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-12-01-mmbs2-0.png"  class="external-link">2022-12-01-mmbs2-0.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2022-12-01-mmbs2-2.png"  class="external-link">2022-12-01-mmbs2-2.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2023-06-02-tapestry4-1.png"  class="external-link">2023-06-02-tapestry4-1.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2023-06-02-tapestry4-2.png"  class="external-link">2023-06-02-tapestry4-2.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2023-06-02-tapestry4-3.png"  class="external-link">2023-06-02-tapestry4-3.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2023-06-02-tapestry4-4.png"  class="external-link">2023-06-02-tapestry4-4.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2023-06-02-tapestry4-5.png"  class="external-link">2023-06-02-tapestry4-5.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2023-06-02-tapestry4-internal.png"  class="external-link">2023-06-02-tapestry4-internal.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2024-02-24-looped-play-7.png"  class="external-link">2024-02-24-looped-play-7.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2024-02-24-looped-play-8.png"  class="external-link">2024-02-24-looped-play-8.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/2024-02-24-looped-play-video.mp4"  class="external-link">2024-02-24-looped-play-video.mp4</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/GDBt8T 1.png"  class="external-link">GDBt8T 1.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/Untitled.png"  class="external-link">Untitled.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/pacmanquine.png"  class="external-link">pacmanquine.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/tbaao.png"  class="external-link">tbaao.png</a></li>
			<li><div class="file-icon non-md-file"></div><a class="" href="/works/media/xdnAAg.png"  class="external-link">xdnAAg.png</a></li>
		</ul>
	</div>
	<ul class="dir-list">
		<li><div class="file-icon"></div><a class="" href="/works/auto mario.html"  >auto mario</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/linked jumps.html"  >linked jumps</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/mario angst.html"  >mario angst</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/mario feedback.html"  >mario feedback</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/mario flicker.html"  >mario flicker</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/mario ghost.html"  >mario ghost</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/mario lylat system.html"  >mario lylat system</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/mario mario's bro skater 2.html"  >mario mario's bro skater 2</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/mario tag.html"  >mario tag</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/pacman quine.html"  >pacman quine</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/plunder 1.html"  >plunder 1</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/plunder 2.html"  >plunder 2</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/plunder 3.html"  >plunder 3</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/tapestry.html"  >tapestry</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/tbaao.html"  >tbaao</a></li>
		<li><div class="file-icon"></div><a class="" href="/works/violence medium.html"  >violence medium</a></li>
	</ul>
</div>
<ul class="dir-list">
	<li><div class="file-icon"></div><a class="" href="/devlogs.html"  >devlogs</a></li>
	<li><div class="file-icon"></div><a class="" href="/directory.html"  >directory</a></li>
	<li><div class="file-icon"></div><a class="" href="/index.html"  >index</a></li>
	<li><div class="file-icon"></div><a class="" href="/references.html"  >references</a></li>
	<li><div class="file-icon"></div><a class="" href="/working-group.html"  >working-group</a></li>
</ul>
</div>
    </div>
</div>
                        <div class="container" style="margin: 0; overflow-y: scroll;">
                                <div class="content"><h1 id="how-to-plunderludics-old">how to plunderludics (old)</h1>
<h2 id="intro">Intro</h2>
<p>plunderludics is like sampling records but for games instead of music. if you wanna know more go <a href="/index.html">here</a>   </p>
<p>we have been playing around with this stuff for a while and found a bunch of helpful tools that make the whole thing a bit easier.   </p>
<p>this tutorial is like a step-by-step guide to help you get started. We are gonna grab a sample from Mario 64 and do some crazy stuff with it.   </p>
<h3 id="preliminaries">Preliminaries</h3>
<p>This whole thing probably only works on Windows atm :/   </p>
<p>Tutorial assumes you have a little bit of familiarity with emulators, you know what a 'save state' is, etc. Being familiar with Unity &amp; Lua will also help in the later parts.   </p>
<p>Being familiar with using the command line and Python will also be very convenient but not totally necessary.   </p>
<h2 id="setting-up">Setting up</h2>
<h3 id="download-plunder-repos">Download plunder repos</h3>
<p>Clone or download this repo: <a href="https://github.com/plunderludics/samples." class="external-link">https://github.com/plunderludics/samples.</a> <br />
This has a bunch of videogame samples that we have created and also a script for conveniently running them. <br />
Also this one: <a href="https://github.com/plunderludics/scripts," class="external-link">https://github.com/plunderludics/scripts,</a> which has a BizHawk configuration file (very useful) and a bunch of other scripts you probably don't need right now.   </p>
<h3 id="install-bizhawk">Install BizHawk</h3>
<p>First you gotta get [https://tasvideos.org/BizHawk|BizHawk]. BizHawk is a great open-source project that packages up a bunch of emulators - NES, PSX, N64, + like 100 other platforms. It is useful for this stuff because it supports a lot of platforms and it has nice Lua scripting support (we will get to this later).   </p>
<p>So go to the BizHawk link and download it (we are currently using the latest version, 2.9.1). You also need to run the 'prereq installer' to install a bunch of dependencies. <br />
Once you've installed the prereqs, unzip the BizHawk folder. EmuHawk.exe is the main executable, run it. You should just see a black window right now because no game is loaded.   </p>
<h3 id="find-a-rom">Find a rom</h3>
<p>To run a game in BizHawk you gotta find a rom (the file that contains the game). It is not hard to find roms online for pretty much any game by searching for '\&lt;game name&gt; \&lt;platform&gt; \&lt;rom&gt;'. For this tutorial we will our favorite Mario 64.   </p>
<p>So download the rom, then open it in BizHawk, and the game should just start running. Now you can play Mario 64 on your computer.   </p>
<p>To make the rest of the tutorial more convenient, make a directory called <code>roms</code> in the same directory as BizHawk. Put the mario rom file in there, and rename it to <code>mario.z64</code> for simplicity. Also put the <code>samples</code> directory in the same parent directory.   </p>
<p>So file hierarchy would look like:   </p>
<ul>
<li>plunderludics   <ul>
<li>BizHawk   </li>
<li>roms   <ul>
<li>mario.z64   </li>
</ul>
</li>
<li>samples   </li>
<li>scripts   </li>
</ul>
</li>
</ul>
<h2 id="sampling">Sampling</h2>
<p>OK so in music a 'sample' usually means a fragment of audio ripped from a longer track. In plunderludics the meaning is a little more vague but we imagine the equivalent as being like a  'moment' of gameplay ripped from an existing game. E.g. maybe we like the little bit of gameplay where mario can spin around at the top of a tree outside the castle.   </p>
<h3 id="make-a-sample">Make a sample</h3>
<p>The most important piece of a plunderludic sample is a save state. So we get mario up to the top of the tree, and then hit 'Save Named State' in BizHawk to save the state. Make a new folder in the <code>samples</code> directory called something like <code>mario-in-tree</code>, and save the state file within that directory (called something like <code>mario-in-tree.State</code>)   </p>
<p>[Ignore this bit if you don't want to use Python/command line] <br />
This part is a bit annoying, but you should also make a file called <code>rompath.txt</code> inside the <code>mario-in-tree</code> directory, and put this text inside: <code>../roms/mario.z64</code>. This lets our run_sample.py script (see below) know which rom this particular sample is connected to.   </p>
<h3 id="run-the-sample">Run the sample</h3>
<p>The easiest way to run the sample is open BizHawk, load the mario rom, and then load the state that you just saved. But this can be annoying if you have to do those steps many times while working on something. So we also have a script called <code>run_sample.py</code> which basically automates those steps. If you have a command line + Python installed, you can run it like this, from the <code>samples</code> directory: <br />
<code>python run_sample.py mario-in-tree</code>.   </p>
<p>From here you can get started sampling your favorite videogame moments.   </p>
<h2 id="more">More</h2>
<p>If you want to be able to do stuff like applying effects to the game graphics, overlaying different games on top of each other, etc, read 'Postprocessing in Unity'.   </p>
<p>If you want to be able to modify the samples themselves - (e.g. we could disable the up &amp; down controls so mario can't climb down the tree), read 'basic scripting'.   </p>
<p>For actually modifying the state of the emulated game in RAM (like changing Mario's health value or position, etc), read 'RAM hacking'.   </p>
<h3 id="postprocessing-in-unity">Postprocessing in Unity</h3>
<p>Clone or download: <a href="https://github.com/plunderludics/plunderunity" class="external-link">https://github.com/plunderludics/plunderunity</a> <br />
Put that inside your top-level plunderludics directory as well. <br />
<code>plunderunity</code> is a Unity project with some tools for plundering. The most important thing it can do is capture another window on the computer (e.g. BizHawk), and let you use that as a texture within Unity.   </p>
<p>More to come, but to get started check out the SoftwareSample prefab. <br />
...   </p>
<h3 id="basic-scripting">Basic scripting</h3>
<p>...   </p>
<h3 id="ram-hacking">RAM hacking</h3>
<p>...</p></div>
<div class="note-footer">
<div class="backlinks">
<h2>Backlinks</h2>
<ul>
	<li><a class="backlink" href="/index.html">index</a></li>
</ul>
</div>

<div class="tags">

</div>

</div>

                                <!-- end content -->
                        </div>
                        <div class="container_filler">
                        </div>
                        <div id="right_pane" class="right_pane active">
    <div id="right_pane_fold_header" class="right_pane_fold_header fold_header">x</div>
    <div id="right_pane_content" class="right_pane_content">
            
    </div>
</div>
                </div>
        </div>

        <script>
                function handle_toggle_side_bar(e){
                        let header;
                        let pane;
                        let target = e.target

                        // switch out the navbar button click for a header click
                        if (target.id == 'left_pane_toggle_nav'){
                                target = document.getElementById('left_pane_fold_header')
                        }
                        else if (target.id == 'right_pane_toggle_nav'){
                                target = document.getElementById('right_pane_fold_header')
                        }

                        // get header and pane
                        if (target.classList.contains('fold_header')) {
                                header = target;
                                pane = target.parentElement;
                        }
                        else {
                                pane = target;
                                header = target.getElementsByClassName('fold_header')[0];
                        }
                        toggle_side_bar(pane, header, true)
                        e.stopPropagation();
                }
                function handle_toggle_side_bar_button(e){
                        document.getElementById('menu_toggle_button').click()
                        handle_toggle_side_bar(e);
                }

                function toggle_side_bar(pane, header, save) {
                        let active = (pane.classList.contains('active'))
                        if (active){
                                disable_side_bar(pane, header, save);
                        }
                        else {
                                enable_side_bar(pane, header, save);
                        }
                }
                function enable_side_bar(pane, header, save){
                        pane.classList.add('active');
                        pane.removeEventListener('click', handle_toggle_side_bar);
                        header.addEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, true) }
                }
                function disable_side_bar(pane, header, save){
                        pane.classList.remove('active');
                        pane.addEventListener('click', handle_toggle_side_bar);
                        header.removeEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, false) }
                }
                function set_correct_header_symbol(header){
                        let pane = header.parentElement;
                        let symbol = [['>', '<'],['<', '>']]
                        symbol = symbol[Number(header.classList.contains('right_pane_fold_header'))][Number(pane.classList.contains('active'))];
                        console.log(symbol);
                        header.innerHTML = symbol
                        return header;
                }
                function panel_folding_get_panel_name(header){
                        return ['left', 'right'][Number(header.classList.contains('right_pane_fold_header'))]
                }
                function save_panel_folding_state(header, active){
                        ls_set('pane_folding_state_'+panel_folding_get_panel_name(header), Number(active));
                }
                function load_panel_folding_state(panel_name){
                        val = ls_get('pane_folding_state_'+panel_name)
                        if (!val){ return {'exists': false, 'value': null}}
                        return {'exists': true, 'value': Boolean(Number(val))}
                }

                function set_pane_folding_start(left_header, right_header){
                        let right_pane_exists = document.getElementById('right_pane') !== null
                        let left_pane_exists = document.getElementById('left_pane') !== null

                        let right_pane_enabled = right_pane_exists
                        let left_pane_enabled = right_pane_exists

                        let w = window.visualViewport.width
                        if (w < 1000){
                                left_pane_enabled = false
                        }
                        if (w < 800){
                                right_pane_enabled = false
                        }

                        // get saved values if present
                        let rval = load_panel_folding_state('right')
                        if (rval['exists']){
                                right_pane_enabled = rval['value']
                        }
                        let lval = load_panel_folding_state('left')
                        if (lval['exists']){
                                left_pane_enabled = lval['value']
                        }

                        // default = enabled, so we only need to disable
                        if (left_pane_exists) {
                                if (!left_pane_enabled){
                                        disable_side_bar(document.getElementById('left_pane'), document.getElementById('left_pane_fold_header'))
                                } else {
                                        init_pane_folding(document.getElementById('left_pane_fold_header'))
                                        document.getElementById('left_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button)
                                }
                        }

                        if (right_pane_exists) {
                                if (!right_pane_enabled){
                                        disable_side_bar(document.getElementById('right_pane'), document.getElementById('right_pane_fold_header'))
                                } else {
                                        init_pane_folding(document.getElementById('right_pane_fold_header'))
                                        document.getElementById('right_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button)
                                }
                        }
                }

                function init_pane_folding(header){
                        set_correct_header_symbol(header)
                        header.addEventListener('click', handle_toggle_side_bar)
                }

                set_pane_folding_start()
        </script>

        <script src="/obs.html/static/load_dirtree_footer.js" type="text/javascript"></script>

        




</body>
</html>
